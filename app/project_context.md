AI Math Tutor - Project Bible (v2.0)
1. å°ˆæ¡ˆèƒŒæ™¯ (Project Context)
ğŸ¯ æ ¸å¿ƒç›®æ¨™
æœ¬å°ˆæ¡ˆç‚ºä¸€æ¬¾ é‡å°å°å­¸ç”Ÿçš„å…¨æ–¹ä½æ™ºèƒ½å­¸ç¿’ App (AI Math Tutor)ã€‚ æ ¸å¿ƒè³£é»åœ¨æ–¼åˆ©ç”¨ AI ç”ŸæˆæŠ€è¡“ (AIGC) å¯¦ç¾ã€Œç„¡é™è©¦é¡Œã€èˆ‡ã€Œå€‹äººåŒ–å®¶æ•™é«”é©—ã€ï¼Œè§£æ±ºå‚³çµ±ç·´ç¿’é¡Œæ¯ç‡¥é‡è¤‡ã€ç¼ºä¹é‡å°æ€§è§£èªªçš„ç—›é»ã€‚ä¸¦é‡å°ç‰¹æ®Šéœ€æ±‚å­¸ç”Ÿï¼ˆå¦‚ ADHDï¼‰æä¾›è¼”åŠ©ä»‹é¢ã€‚

ğŸ‘¥ ç›®æ¨™ç”¨æˆ¶èˆ‡æ¬Šé™é«”ç³»
ç³»çµ±åˆ†ç‚ºä¸‰ç¨®ç”¨æˆ¶æ¨¡å¼èˆ‡å…©å€‹ä¸»è¦ä»‹é¢å±¤ç´šï¼š

A. ç”¨æˆ¶æ¨¡å¼ (User Roles)
å…è²»ç”¨æˆ¶ (Free User)ï¼š

åŸºæœ¬ç·´ç¿’åŠŸèƒ½ã€‚

æœ‰é™çš„æ¯æ—¥ç”Ÿæˆé¡Œæ•¸ã€‚

è¨‚é–±ç”¨æˆ¶ (Subscriber / Premium)ï¼š

AI è€å¸«è·Ÿé€²ï¼šæ¯ 2 é€±ç”Ÿæˆé€²åº¦å ±å‘Šï¼Œä¸¦è‡ªå‹•åˆ¶è¨‚ä¸‹ä¸€éšæ®µçš„å®¢è£½åŒ–èª²ç¨‹ã€‚

ADHD è¼”åŠ©æ¨¡å¼ï¼š

ä»‹é¢å„ªåŒ–ï¼ˆé«˜äº®é—œéµå­—ã€æ¸›å°‘å¹²æ“¾ï¼‰ã€‚

TTS èªéŸ³è®€é¡Œã€‚

å¯åŒ¯å‡ºä¾›é†«ç”Ÿ/å­¸æ ¡åƒè€ƒçš„è©³ç´°å°ˆæ³¨åŠ›èˆ‡é€²åº¦å ±å‘Šã€‚

ç„¡é™ç”Ÿæˆé¡Œç›®ã€‚

æ•™å­¸è€…ç”¨æˆ¶ (Teacher/Educator)ï¼š

ç­ç´šç®¡ç†ï¼šè‡ªè¡Œçµ„ç­ï¼Œå°‡å­¸ç”Ÿå¸³è™Ÿç´å…¥ç®¡ç†ã€‚

æ´¾å·åŠŸèƒ½ï¼šçµ±ä¸€ç™¼å‡ºè©¦é¡Œï¼ˆåŠŸèª²/æ¸¬é©—ï¼‰ã€‚

æ•¸æ“šä¸­æ§å°ï¼šæª¢è¦–å…¨ç­æˆç¸¾åˆ†ä½ˆã€å€‹åˆ¥å­¸ç”Ÿé€²åº¦ã€‚

ç¨®å­è©¦é¡Œåº«ï¼šä¸Šå‚³ã€Œç¨®å­é¡Œç›® (Seed)ã€ï¼ŒAI è‡ªå‹•è½‰åŒ–ç”Ÿæˆè®Šé«”é¡Œç›®ã€‚

B. ä»‹é¢å±¤ç´š (Interface Views)
å­¸ç”Ÿä»‹é¢ï¼š

ç·´ç¿’ä¸»ç•«é¢ã€‚

èƒ½åŠ›å€¼é›·é”åœ– (Octagonal Chart)ï¼š8 å€‹ç¶­åº¦åˆ†æå¼·å¼±é …ã€‚

éŒ¯é¡Œæœ¬ (Mistake Review)ï¼šé‡åšæ­·å²éŒ¯é¡Œã€‚

å®¶é•·ä»‹é¢ï¼š

å…¨æ•¸æ“šç›£æ§ï¼šå­¸ç¿’æ™‚é–“ã€åšé¡Œé‡ã€æˆç¸¾è¶¨å‹¢ã€AI è©•èªã€‚

2. ç•¶å‰é€²åº¦ (Current Status)
å¾ StackBlitz é·ç§»è‡³ Cursorï¼Œç›®å‰ç‰ˆæœ¬ï¼šv2.0 Stable

[x] æ ¸å¿ƒ AI å¼•æ“ï¼šå·²ä¸²æ¥ Google Gemini APIï¼Œå¯¦ç¾ã€Œç¨®å­ -> è®Šé«”é¡Œç›®ã€çš„ç”Ÿæˆé‚è¼¯ã€‚

[x] å‡ºé¡Œç³»çµ±ï¼šæ”¯æ´æ–‡å­—é¡Œã€é¸æ“‡é¡Œ (MCQ) è‡ªå‹•ç”Ÿæˆ (æ•¸å­¸ç§‘ 8 é¸é … + èª˜ç­”é …ï¼Œå…¶ä»–ç§‘ç›® 4 é¸é … + èª˜ç­”é …)ã€‚

[x] æ•ˆèƒ½å„ªåŒ–ï¼šå¯¦ä½œã€Œé åŠ è¼‰ (Pre-loading)ã€æ©Ÿåˆ¶ï¼Œå¯¦ç¾ç„¡æ„Ÿç§’é–‹ä¸‹ä¸€é¡Œã€‚

[x] è³‡æ–™åº«æ¶æ§‹ï¼šFirebase Firestore ä¸²æ¥å®Œæˆ (Users, Topics, PastPapers, Mistakes)ã€‚

[x] é–‹ç™¼è€…å¾Œå° (Admin/Teacher Prototype)ï¼š

å–®å…ƒç®¡ç† (Syllabus)ã€‚

ç¨®å­è©¦é¡Œä¸Šå‚³ (Seed Upload)ã€‚

AI ç”Ÿæˆæ¸¬è©¦å°ã€‚

[x] å­¸ç”Ÿå„€è¡¨æ¿ (Dashboard)ï¼š

åŸºæœ¬ UI (Tailwind CSS)ã€‚

èƒ½åŠ›é›·é”åœ– (Recharts)ã€‚

ADHD æ¨¡å¼é–‹é—œ (åˆæ­¥ UI è®Šæ›´)ã€‚

[ ] å¾…é–‹ç™¼åŠŸèƒ½ (Next Steps)ï¼š

å®¶é•·å°ˆå±¬ä»‹é¢ (ç›®å‰æ•¸æ“šåƒ…åœ¨å­¸ç”Ÿ Dashboard é¡¯ç¤º)ã€‚

æ•™å­¸è€…ä»‹é¢å®Œæ•´åŒ– (éœ€å¾ Developer Console ç¨ç«‹å‡ºä¾†ï¼ŒåŠ å…¥ç­ç´šç®¡ç†)ã€‚

AI é›™é€±å ±å‘Šç”Ÿæˆå™¨ (è¨‚é–±ç”¨æˆ¶æ ¸å¿ƒåŠŸèƒ½)ã€‚

ADHD æ¨¡å¼æ·±åº¦å„ªåŒ– (é—œéµå­—é«˜äº®ç®—æ³•ã€èªéŸ³åˆæˆ)ã€‚

æ”¯ä»˜èˆ‡è¨‚é–±æ¬Šé™é–å®šã€‚

3. æŠ€è¡“æ¶æ§‹ (Tech Stack)
Frontend Framework: Next.js 14+ (App Router)

Language: TypeScript

Styling: Tailwind CSS, Lucide React (Icons)

Charts: Recharts (ç”¨æ–¼èƒ½åŠ›é›·é”åœ–)

Backend / Database: Google Firebase (Firestore, Auth)

AI Model: Google Gemini 2.0 Flash / 1.5 Flash (via Next.js API Routes)

State Management: React Hooks (useState, useEffect, useContext)

Deployment: Vercel (Recommended)

4. é—œéµæ¥­å‹™é‚è¼¯ (Business Logic Rules)
AI å‡ºé¡Œè¦å‰‡ (AI Service Constraints)
JSON Output: æ‰€æœ‰å›æ‡‰å¿…é ˆæ˜¯åš´æ ¼çš„ JSON æ ¼å¼ã€‚

é¸æ“‡é¡Œæ©Ÿåˆ¶:

æ•¸å­¸ç§‘é¸æ“‡é¡Œï¼š
- å¿…é ˆåŒ…å« options é™£åˆ— (é•·åº¦ 8)ã€‚
- å¿…é ˆåŒ…å« 7 å€‹ã€Œåˆç†çš„éŒ¯èª¤ç­”æ¡ˆ (Distractors)ã€ã€‚
- answer å¿…é ˆå®Œå…¨åŒ¹é… options ä¸­çš„ä¸€é …ã€‚

å…¶ä»–ç§‘ç›®é¸æ“‡é¡Œï¼š
- å¿…é ˆåŒ…å« options é™£åˆ— (é•·åº¦ 4)ã€‚
- å¿…é ˆåŒ…å« 3 å€‹ã€Œåˆç†çš„éŒ¯èª¤ç­”æ¡ˆ (Distractors)ã€ã€‚
- answer å¿…é ˆå®Œå…¨åŒ¹é… options ä¸­çš„ä¸€é …ã€‚

ç¨®å­è®Šé«” (Seed Variation):

ç¶­æŒåŸé¡Œé›£åº¦èˆ‡è€ƒé» (Logic & Concept)ã€‚

æ›´æ”¹æ•¸å­—ã€å ´æ™¯ã€äººå (Context)ã€‚

è©³è§£ (Explanation): å¿…é ˆé™åˆ¶åœ¨ 30 å­—ä»¥å…§ä»¥ç¢ºä¿ç”Ÿæˆé€Ÿåº¦ã€‚

éŒ¯é¡Œæ©Ÿåˆ¶ (Mistakes Handling)
ç­”éŒ¯æ™‚ï¼Œå°‡é¡Œç›®å®Œæ•´ Snapshot å­˜å…¥ users/{uid}/mistakesã€‚

å­¸ç”Ÿå¯åœ¨éŒ¯é¡Œæœ¬ä¸­ã€Œé‡ç·´ã€ï¼Œæ­¤æ™‚æ‡‰è§¸ç™¼ AI æ ¹æ“šè©²éŒ¯é¡Œç”Ÿæˆã€Œèˆ‰ä¸€åä¸‰ã€çš„æ–°é¡Œç›®ï¼ˆå¾…å¯¦ä½œï¼‰ã€‚

ADHD è¼”åŠ©æ¨¡å¼ (ADHD Mode specs)
UI: éš±è—ä¸å¿…è¦çš„è£é£¾ã€èƒŒæ™¯ç°¡åŒ–ã€å­—é«”æ”¾å¤§ã€å°æ¯”åº¦å¢åŠ ã€‚

åŠŸèƒ½: é¡Œç›®ä¸­çš„æ•¸å­—ã€å–®ä½ã€é—œéµå‹•ä½œï¼ˆå¦‚ï¼šè²·äº†ã€å‰©ä¸‹ã€å¹³å‡ï¼‰éœ€é€²è¡Œ é«˜äº®é¡¯ç¤ºã€‚

5. è³‡æ–™åº«çµæ§‹åƒè€ƒ (Firestore Schema)
artifacts/{APP_ID}/public/data/users: ç”¨æˆ¶è³‡æ–™ (åŒ…å« role: 'student' | 'parent' | 'teacher' | 'admin', isPremium: boolean).

artifacts/{APP_ID}/public/data/syllabus: èª²ç¨‹å¤§ç¶± (Grade, Subject, Topic, Sub-topics).

artifacts/{APP_ID}/public/data/past_papers: ç¨®å­è©¦é¡Œåº« (Source Questions).

artifacts/{APP_ID}/users/{UID}/mistakes: å€‹äººéŒ¯é¡Œç´€éŒ„.

artifacts/{APP_ID}/users/{UID}/logs: å­¸ç¿’æ­·ç¨‹ (Time, Score, Action).

6. é‡è¦å‚™è¨» (Notes for Developer/AI)
å®‰å…¨æ€§: API Key å¿…é ˆé€é .env.local è®€å–ï¼Œåš´ç¦å¯«æ­»åœ¨ä»£ç¢¼ä¸­ã€‚

æ•ˆèƒ½: ä»»ä½•æ–°çš„ AI åŠŸèƒ½é–‹ç™¼ï¼Œå¿…é ˆè€ƒæ…®å›æ‡‰æ™‚é–“ã€‚è‹¥é è¨ˆè¶…é 3 ç§’ï¼Œå¿…é ˆå¯¦ä½œã€Œé åŠ è¼‰ (Pre-loading)ã€æˆ–ã€ŒèƒŒæ™¯æ’ç¨‹ã€ã€‚

é·ç§»æ­·ç¨‹:

å°ˆæ¡ˆåˆæœŸå› åœ°å€é™åˆ¶ç„¡æ³•ä½¿ç”¨ Geminiï¼Œç¾å·²é€é API Key + æŒ‡å®š Model è§£æ±ºã€‚

æ›¾ç™¼ç”Ÿ Tailwind æ¨£å¼è¡çªå°è‡´ UI è·‘ç‰ˆ (Bullet points)ï¼Œå·²å¼·åˆ¶ä¿®å¾©ã€‚

ç›®å‰ä»£ç¢¼åº«ç‹€æ³: page.tsx æ•´åˆäº†é åŠ è¼‰é‚è¼¯ï¼Œai-service.js æ•´åˆäº†é¸æ“‡é¡Œé‚è¼¯ã€‚

ğŸš€ çµ¦ Cursor çš„æŒ‡ä»¤ (Instruction)
ç•¶ä½ é–‹å§‹å·¥ä½œæ™‚ï¼Œè«‹å„ªå…ˆè®€å–æ­¤æª”æ¡ˆã€‚ æ‰€æœ‰æ–°åŠŸèƒ½çš„é–‹ç™¼ï¼Œè«‹åš´æ ¼éµå®ˆ Section 1 çš„æ ¸å¿ƒç›®æ¨™ èˆ‡ Section 4 çš„æ¥­å‹™é‚è¼¯ã€‚ è‹¥æ˜¯ä¿®æ”¹ UIï¼Œè«‹ä¿æŒç›®å‰çš„ç´«è‰²/ç¾ä»£åŒ–é¢¨æ ¼ (Tailwind)ã€‚
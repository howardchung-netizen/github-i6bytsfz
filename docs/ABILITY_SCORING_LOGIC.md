# èƒ½åŠ›è©•åˆ†é‚è¼¯æ–‡æª”

## ğŸ“‹ æ¦‚è¿°

æœ¬ç³»çµ±æ”¯æŒ**æ•¸å­¸ã€ä¸­æ–‡ã€è‹±æ–‡**ä¸‰ç§‘çš„èƒ½åŠ›è©•åˆ†ï¼Œæ¯ç§‘éƒ½æœ‰ 5 å€‹èƒ½åŠ›ç¶­åº¦ï¼Œåˆå§‹å€¼ç‚º 50/100ã€‚

è©•åˆ†é‚è¼¯æ”¯æŒå…©ç¨®åˆ†é¡æ–¹å¼ï¼š
1. **å–®å…ƒ/å­å–®å…ƒæ˜ å°„**ï¼ˆå„ªå…ˆï¼Œæœ€æº–ç¢ºï¼‰- æ ¹æ“šé¡Œç›®çš„å–®å…ƒå’Œå­å–®å…ƒåç¨±æ˜ å°„åˆ°èƒ½åŠ›ç¶­åº¦
2. **æ–‡æœ¬åˆ†æ**ï¼ˆå¾Œå‚™ï¼‰- é€šéåˆ†æé¡Œç›®æ–‡æœ¬å…§å®¹ä¾†åˆ†é¡

## ğŸ“Š èƒ½åŠ›ç¶­åº¦å®šç¾©ï¼ˆæ•¸å­¸ç§‘ï¼‰

### 1. é‹ç®— (Operations)
**å®šç¾©**ï¼šåŸºç¤è¨ˆç®—èƒ½åŠ›ï¼ŒåŒ…æ‹¬åŠ æ¸›ä¹˜é™¤ã€åˆ†æ•¸ã€å°æ•¸é‹ç®—ç­‰

**å°æ‡‰é¡Œç›®é¡å‹**ï¼š
- åŠ æ¸›æ³•é‹ç®—
- ä¹˜é™¤æ³•é‹ç®—
- åˆ†æ•¸é‹ç®—
- å°æ•¸é‹ç®—
- å››å‰‡é‹ç®—
- æ··åˆé‹ç®—

**é—œéµè©åŒ¹é…**ï¼š
- åŠ ã€æ¸›ã€ä¹˜ã€é™¤ã€åˆ†æ•¸ã€å°æ•¸ã€é‹ç®—ã€è¨ˆç®—ã€ç®—å¼

**è©•åˆ†é‚è¼¯**ï¼š
- ç­”å°ï¼š+2 åˆ†ï¼ˆæœ€é«˜ 100 åˆ†ï¼‰
- ç­”éŒ¯ï¼š-1 åˆ†ï¼ˆæœ€ä½ 0 åˆ†ï¼‰
- æ¯é¡Œå½±éŸ¿ï¼šæ ¹æ“šé¡Œç›®é›£åº¦ä¿‚æ•¸èª¿æ•´ï¼ˆç°¡å–®é¡Œ 1xï¼Œä¸­ç­‰é¡Œ 1.5xï¼Œå›°é›£é¡Œ 2xï¼‰

---

### 2. å¹¾ä½• (Geometry)
**å®šç¾©**ï¼šåœ–å½¢è­˜åˆ¥ã€å‘¨ç•Œã€é¢ç©ã€é«”ç©è¨ˆç®—ç­‰å¹¾ä½•ç›¸é—œèƒ½åŠ›

**å°æ‡‰é¡Œç›®é¡å‹**ï¼š
- åœ–å½¢è­˜åˆ¥ï¼ˆé•·æ–¹å½¢ã€æ­£æ–¹å½¢ã€ä¸‰è§’å½¢ã€åœ“å½¢ç­‰ï¼‰
- å‘¨ç•Œè¨ˆç®—
- é¢ç©è¨ˆç®—
- é«”ç©è¨ˆç®—
- è§’åº¦è¨ˆç®—
- å°ç¨±æ€§

**é—œéµè©åŒ¹é…**ï¼š
- å‘¨ç•Œã€é¢ç©ã€é«”ç©ã€é•·æ–¹å½¢ã€æ­£æ–¹å½¢ã€ä¸‰è§’å½¢ã€åœ“å½¢ã€æ¢¯å½¢ã€å¹³è¡Œå››é‚Šå½¢ã€è§’åº¦ã€å°ç¨±

**è©•åˆ†é‚è¼¯**ï¼š
- ç­”å°ï¼š+2 åˆ†ï¼ˆæœ€é«˜ 100 åˆ†ï¼‰
- ç­”éŒ¯ï¼š-1 åˆ†ï¼ˆæœ€ä½ 0 åˆ†ï¼‰
- æ¯é¡Œå½±éŸ¿ï¼šæ ¹æ“šé¡Œç›®é›£åº¦ä¿‚æ•¸èª¿æ•´

---

### 3. é‚è¼¯ (Logic)
**å®šç¾©**ï¼šé‚è¼¯æ¨ç†ã€æ¨¡å¼è­˜åˆ¥ã€åºåˆ—å•é¡Œç­‰é‚è¼¯æ€ç¶­èƒ½åŠ›

**å°æ‡‰é¡Œç›®é¡å‹**ï¼š
- é‚è¼¯æ¨ç†
- æ¨¡å¼è­˜åˆ¥
- åºåˆ—å•é¡Œ
- æ¯”è¼ƒå¤§å°
- æ’åºå•é¡Œ
- æ¢ä»¶åˆ¤æ–·

**é—œéµè©åŒ¹é…**ï¼š
- é‚è¼¯ã€æ¨ç†ã€æ¨¡å¼ã€åºåˆ—ã€æ¯”è¼ƒã€æ’åºã€åˆ¤æ–·ã€å¦‚æœã€é‚£éº¼ã€å› ç‚ºã€æ‰€ä»¥

**è©•åˆ†é‚è¼¯**ï¼š
- ç­”å°ï¼š+2 åˆ†ï¼ˆæœ€é«˜ 100 åˆ†ï¼‰
- ç­”éŒ¯ï¼š-1 åˆ†ï¼ˆæœ€ä½ 0 åˆ†ï¼‰
- æ¯é¡Œå½±éŸ¿ï¼šæ ¹æ“šé¡Œç›®é›£åº¦ä¿‚æ•¸èª¿æ•´

---

### 4. æ‡‰ç”¨é¡Œ (Word Problems)
**å®šç¾©**ï¼šå°‡æ•¸å­¸çŸ¥è­˜æ‡‰ç”¨åˆ°å¯¦éš›æƒ…å¢ƒä¸­çš„èƒ½åŠ›

**å°æ‡‰é¡Œç›®é¡å‹**ï¼š
- æ–‡å­—æ‡‰ç”¨é¡Œ
- æƒ…å¢ƒå•é¡Œ
- å¤šæ­¥é©Ÿè§£é¡Œ
- å¯¦éš›æ‡‰ç”¨ï¼ˆè³¼ç‰©ã€æ™‚é–“ã€è·é›¢ç­‰ï¼‰

**é—œéµè©åŒ¹é…**ï¼š
- æ‡‰ç”¨é¡Œã€å•é¡Œã€æƒ…å¢ƒã€å¯¦éš›ã€è³¼ç‰©ã€æ™‚é–“ã€è·é›¢ã€é€Ÿåº¦ã€åƒ¹æ ¼ã€æ•¸é‡

**è©•åˆ†é‚è¼¯**ï¼š
- ç­”å°ï¼š+2 åˆ†ï¼ˆæœ€é«˜ 100 åˆ†ï¼‰
- ç­”éŒ¯ï¼š-1 åˆ†ï¼ˆæœ€ä½ 0 åˆ†ï¼‰
- æ¯é¡Œå½±éŸ¿ï¼šæ ¹æ“šé¡Œç›®é›£åº¦ä¿‚æ•¸èª¿æ•´
- å¤šæ­¥é©Ÿé¡Œç›®ï¼šæ ¹æ“šæ­¥é©Ÿæ•¸é‡å¢åŠ å½±éŸ¿ä¿‚æ•¸ï¼ˆ2 æ­¥é©Ÿ 1.2xï¼Œ3 æ­¥é©Ÿä»¥ä¸Š 1.5xï¼‰

---

### 5. æ•¸æ“š (Data)
**å®šç¾©**ï¼šæ•¸æ“šè™•ç†ã€çµ±è¨ˆã€åœ–è¡¨è§£è®€ç­‰æ•¸æ“šåˆ†æèƒ½åŠ›

**å°æ‡‰é¡Œç›®é¡å‹**ï¼š
- æ•¸æ“šçµ±è¨ˆ
- åœ–è¡¨è§£è®€ï¼ˆæŸ±ç‹€åœ–ã€æŠ˜ç·šåœ–ã€åœ“å½¢åœ–ç­‰ï¼‰
- å¹³å‡æ•¸è¨ˆç®—
- æ¦‚ç‡å•é¡Œ
- æ•¸æ“šæ¯”è¼ƒ

**é—œéµè©åŒ¹é…**ï¼š
- æ•¸æ“šã€çµ±è¨ˆã€åœ–è¡¨ã€å¹³å‡ã€æ¦‚ç‡ã€æ¯”è¼ƒã€æœ€å¤šã€æœ€å°‘ã€ç¸½è¨ˆ

**è©•åˆ†é‚è¼¯**ï¼š
- ç­”å°ï¼š+2 åˆ†ï¼ˆæœ€é«˜ 100 åˆ†ï¼‰
- ç­”éŒ¯ï¼š-1 åˆ†ï¼ˆæœ€ä½ 0 åˆ†ï¼‰
- æ¯é¡Œå½±éŸ¿ï¼šæ ¹æ“šé¡Œç›®é›£åº¦ä¿‚æ•¸èª¿æ•´

---

## ğŸ”„ è©•åˆ†æ›´æ–°æ©Ÿåˆ¶

### åˆå§‹å€¼
- æ‰€æœ‰èƒ½åŠ›åˆå§‹å€¼ï¼š**50/100**

### æ›´æ–°æ™‚æ©Ÿ
- **å®Œæˆæ•´ä»½è©¦å·å¾Œ**ï¼ˆæ‰€æœ‰é¡Œç›®éƒ½ç­”å®Œï¼‰
- æ ¹æ“šè©¦å·ä¸­æ¯é¡Œçš„è¡¨ç¾è¨ˆç®—ç¸½é«”èƒ½åŠ›è®ŠåŒ–

### è¨ˆç®—å…¬å¼

```javascript
// å°æ–¼æ¯å€‹èƒ½åŠ›ç¶­åº¦
let totalChange = 0;

// éæ­·è©¦å·ä¸­çš„æ‰€æœ‰é¡Œç›®
sessionQuestions.forEach(question => {
  const ability = classifyQuestionAbility(question);
  const isCorrect = question.isCorrect;
  const difficulty = question.difficulty || 1; // 1=ç°¡å–®, 1.5=ä¸­ç­‰, 2=å›°é›£
  
  if (isCorrect) {
    totalChange += 2 * difficulty;
  } else {
    totalChange -= 1 * difficulty;
  }
});

// æ›´æ–°èƒ½åŠ›åˆ†æ•¸ï¼ˆé™åˆ¶åœ¨ 0-100 ç¯„åœå…§ï¼‰
newScore = Math.max(0, Math.min(100, currentScore + totalChange));
```

### é¡Œç›®åˆ†é¡é‚è¼¯

```javascript
function classifyQuestionAbility(question) {
  const questionText = question.question.toLowerCase();
  const topic = question.topic || question.category || '';
  const topicLower = topic.toLowerCase();
  
  // å¹¾ä½•ï¼ˆå„ªå…ˆåˆ¤æ–·ï¼Œå› ç‚ºå¯èƒ½æœ‰åœ–å½¢ï¼‰
  if (question.shape || question.type === 'geometry' || 
      topicLower.includes('å¹¾ä½•') || topicLower.includes('å‘¨ç•Œ') || 
      topicLower.includes('é¢ç©') || topicLower.includes('é«”ç©') ||
      questionText.includes('å‘¨ç•Œ') || questionText.includes('é¢ç©') ||
      questionText.includes('é«”ç©') || questionText.includes('é•·æ–¹å½¢') ||
      questionText.includes('æ­£æ–¹å½¢') || questionText.includes('ä¸‰è§’å½¢') ||
      questionText.includes('åœ“å½¢')) {
    return 'å¹¾ä½•';
  }
  
  // æ•¸æ“š
  if (topicLower.includes('æ•¸æ“š') || topicLower.includes('çµ±è¨ˆ') ||
      topicLower.includes('åœ–è¡¨') || questionText.includes('æ•¸æ“š') ||
      questionText.includes('çµ±è¨ˆ') || questionText.includes('åœ–è¡¨') ||
      questionText.includes('å¹³å‡') || questionText.includes('æ¦‚ç‡')) {
    return 'æ•¸æ“š';
  }
  
  // æ‡‰ç”¨é¡Œï¼ˆåŒ…å«å¯¦éš›æƒ…å¢ƒï¼‰
  if (topicLower.includes('æ‡‰ç”¨') || questionText.includes('æ‡‰ç”¨é¡Œ') ||
      questionText.includes('è²·') || questionText.includes('è³£') ||
      questionText.includes('å…ƒ') || questionText.includes('å€‹') ||
      questionText.includes('æ™‚é–“') || questionText.includes('è·é›¢') ||
      questionText.includes('é€Ÿåº¦')) {
    return 'æ‡‰ç”¨é¡Œ';
  }
  
  // é‚è¼¯
  if (topicLower.includes('é‚è¼¯') || topicLower.includes('æ¨ç†') ||
      questionText.includes('é‚è¼¯') || questionText.includes('æ¨ç†') ||
      questionText.includes('æ¨¡å¼') || questionText.includes('åºåˆ—') ||
      questionText.includes('æ¯”è¼ƒ') || questionText.includes('æ’åº')) {
    return 'é‚è¼¯';
  }
  
  // é‹ç®—ï¼ˆé»˜èªï¼‰
  return 'é‹ç®—';
}
```

---

## ğŸ“ æ•¸æ“šåº«å­˜å„²

### å­˜å„²ä½ç½®
- è·¯å¾‘ï¼š`artifacts/{APP_ID}/users/{userId}/ability_scores`
- æ–‡æª”çµæ§‹ï¼š
```javascript
{
  subject: 'math', // 'math' | 'chi' | 'eng'
  scores: {
    é‹ç®—: 50,
    å¹¾ä½•: 50,
    é‚è¼¯: 50,
    æ‡‰ç”¨é¡Œ: 50,
    æ•¸æ“š: 50
  },
  updatedAt: serverTimestamp(),
  lastSessionId: 'session_id'
}
```

### æ›´æ–°é »ç‡
- æ¯æ¬¡å®Œæˆæ•´ä»½è©¦å·å¾Œæ›´æ–°
- ä½¿ç”¨ `setDoc` åˆä½µæ›´æ–°ï¼ˆ`merge: true`ï¼‰

---

## ğŸ¯ ä¸­æ–‡ç§‘å’Œè‹±æ–‡ç§‘è©•åˆ†é‚è¼¯

### ä¸­æ–‡ç§‘èƒ½åŠ›ç¶­åº¦
1. **é–±è®€** (Reading)
2. **å¯«ä½œ** (Writing)
3. **æˆèª** (Idioms)
4. **æ–‡æ³•** (Grammar)
5. **ä¿®è¾­** (Rhetoric)

### è‹±æ–‡ç§‘èƒ½åŠ›ç¶­åº¦
1. **Grammar** (èªæ³•)
2. **Vocab** (è©å½™)
3. **Reading** (é–±è®€)
4. **Listening** (è½åŠ›)
5. **Speaking** (å£èª)

**è©•åˆ†é‚è¼¯**ï¼šèˆ‡æ•¸å­¸ç§‘ç›¸åŒï¼Œæ ¹æ“šé¡Œç›®é¡å‹åˆ†é¡ä¸¦è¨ˆç®—åˆ†æ•¸ã€‚

---

## âš™ï¸ å¯¦ç¾æ­¥é©Ÿ

1. âœ… ä¿®æ”¹ stats åˆå§‹å€¼ç‚º 50/100
2. âœ… åœ¨ DashboardView ä¸­é¡¯ç¤ºåˆ†æ•¸æ ¼å¼ (50/100)
3. âœ… å¯¦ç¾é¡Œç›®åˆ†é¡å‡½æ•¸ `classifyQuestionAbility`
4. âœ… å¯¦ç¾èƒ½åŠ›è©•åˆ†è¨ˆç®—å‡½æ•¸ `calculateAbilityScores`
5. âœ… åœ¨å®Œæˆè©¦å·å¾Œèª¿ç”¨è©•åˆ†æ›´æ–°
6. âœ… ä¿å­˜èƒ½åŠ›åˆ†æ•¸åˆ°æ•¸æ“šåº«
7. âœ… å¾æ•¸æ“šåº«è¼‰å…¥èƒ½åŠ›åˆ†æ•¸ï¼ˆå¦‚æœå­˜åœ¨ï¼‰

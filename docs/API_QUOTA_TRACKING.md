# Google Gemini API 配額追蹤指南

## 📅 配額重置時間

### 官方重置時間
- **太平洋時間（PST）**: 午夜 00:00
- **香港時間（HKT）**: 下午 4:00（標準時間）或下午 3:00（夏令時）

### 注意事項
- 配額重置可能不是精確的 UTC 00:00
- 可能是按 API Key 創建時間的 24 小時滾動窗口
- 建議在下午 4:00 後檢查配額是否重置

---

## 📊 免費層配額限制

根據 Google AI Studio 顯示：

### `gemini-2.5-flash` 模型
- **RPM (每分鐘請求數)**: 5 個請求/分鐘
- **TPM (每分鐘 Token 數)**: 250K tokens/分鐘
- **RPD (每日請求數)**: 20 個請求/天 ⚠️

### 重要發現
- 每日配額是 **20 個請求**，不是 250 個
- 每分鐘限制是 **5 個請求**
- Token 限制通常不會用完（250K 很大）

---

## 🔍 如何檢查配額狀態

### 方法 1：Google AI Studio
1. 前往 https://aistudio.google.com
2. 進入 **Usage and Billing** → **Rate Limit**
3. 查看 "Rate limits by model" 表格
4. 檢查 RPD (Requests Per Day) 的使用情況

### 方法 2：API 測試端點
訪問您的部署網址：
```
https://your-vercel-url.vercel.app/api/check-quota
```

### 方法 3：直接測試
在應用中嘗試生成一題，如果成功表示配額可用

---

## ⏰ 配額重置確認步驟

1. **記錄當前時間**
   - 香港時間：______
   - 太平洋時間：______

2. **檢查 Google AI Studio**
   - 查看使用量圖表
   - 確認最後一次請求的時間
   - 計算是否已過 24 小時

3. **測試配額**
   - 訪問 `/api/check-quota` 端點
   - 或嘗試生成一題

---

## 💡 優化建議

### 減少 API 調用
1. **實現緩存機制**
   - 相同題目類型可以緩存結果
   - 避免重複生成相同內容

2. **批量處理**
   - 一次生成多題（如果 API 支持）
   - 減少請求次數

3. **預加載策略**
   - 只在用戶真正需要時才預加載
   - 避免浪費配額

4. **錯誤處理**
   - 配額超限時顯示友好提示
   - 建議用戶稍後再試

---

## 🚀 升級到付費方案

如果 20 個請求/天不夠用：

1. **點擊 "Set up billing"**
2. **選擇付費方案**
3. **獲得更高配額**：
   - 更高的每日請求數
   - 更高的每分鐘請求數
   - 按使用量付費

---

## 📝 配額使用記錄

建議記錄每日使用情況：

| 日期 | 使用量 | 重置時間 | 備註 |
|------|--------|----------|------|
|      |        |          |      |

---

**最後更新**: 根據實際使用情況調整

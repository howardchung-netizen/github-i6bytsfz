# Vision API 成本計算器

## 📊 快速成本估算

### 輸入參數
- **題目數量**：______ 道
- **每題圖像大小**：______ KB
- **圖像尺寸**：______ × ______ 像素
- **使用模型**：□ Gemini 1.5 Flash  □ Gemini 1.5 Pro

### 計算結果

#### Token 計算
```
圖像 tokens ≈ (寬度 × 高度) / 512
文字 tokens ≈ 500（prompt）
總輸入 tokens = 圖像 tokens + 文字 tokens
輸出 tokens ≈ 200（JSON 響應）
```

#### 成本計算（Gemini 1.5 Flash）
```
輸入成本 = 總輸入 tokens × 題目數量 × $0.000075 / 1K tokens
輸出成本 = 輸出 tokens × 題目數量 × $0.0003 / 1K tokens
總成本 = 輸入成本 + 輸出成本
```

---

## 💰 實際成本示例

### 場景 1：小規模（1000 題）
- **圖像大小**：800×600 像素
- **每題成本**：約 $0.00017
- **總成本**：約 **$0.17**（HK$1.31）

### 場景 2：中規模（10,000 題）
- **圖像大小**：800×600 像素
- **每題成本**：約 $0.00017
- **總成本**：約 **$1.68**（HK$13.10）

### 場景 3：大規模（100,000 題）
- **圖像大小**：800×600 像素
- **每題成本**：約 $0.00017
- **總成本**：約 **$16.80**（HK$131）

---

## 📈 成本優化建議

### 1. 圖像壓縮
- **壓縮前**：200KB → 約 938 tokens
- **壓縮後**：50KB → 約 235 tokens
- **節省**：約 75% 成本

### 2. 批量處理
- 一次處理多張圖像
- 減少 API 調用次數
- 節省約 10-20% 成本

### 3. 緩存機制
- 相同圖像只處理一次
- 重複題目直接使用緩存
- 節省約 30-50% 成本

### 4. 使用 Flash 模型
- Flash 比 Pro 便宜約 16 倍
- 對於簡單圖形足夠準確

---

## 🎯 推薦方案

### 最佳實踐：混合方案

**70% 簡單題目**（方案 A - 手動）
- 成本：$0
- 時間：人工處理

**30% 複雜題目**（方案 B - Vision API）
- 成本：約 $0.05 / 1000 題
- 時間：自動處理

**總成本**：約 **$0.05 / 1000 題**（HK$0.39）

---

## 📞 需要幫助？

如果需要實現 Vision API 功能，我可以幫您：
1. 創建 Vision API 路由
2. 修改上傳組件支持圖像
3. 實現批量處理功能
4. 添加成本監控
